(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(void 0,r=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,"string");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a.key),"symbol"===e(r)?r:String(r)),a)}var r}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=n((function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=document.createElement(n);""!==o&&(a.className=o),t.append(a),this.node=a})),a=[["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],["Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","Del"],["Caps lock","a","s","d","f","g","h","j","k","l",";",'"',"Enter"],["Shift","z","x","c","v","b","n","m",",",".","?","▲","Shift"],["Ctrl","Win","Alt","Space","Alt","◄","▼","►","Ctrl"]],r=["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","Del","Caps lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","▲","Shift","Ctrl","Win","Alt","Space","Alt","◄","▼","►","Ctrl"],c=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"];window.addEventListener("DOMContentLoaded",(function(){var e,t=!1,n=new o(document.body,"div","wrapper"),l=new o(n.node,"header","header");new o(l.node,"h1","title").node.textContent="Виртуальная клавиатура";var i=new o(n.node,"main","main");i.node.innerHTML='<textarea class = "textarea" rows="5" cols="50" autofocus></textarea>';var d=document.querySelector(".textarea"),s=new o(i.node,"div","keyboard");function u(e){switch(e){case"Tab":d.value+="    ";break;case"ShiftLeft":case"ShiftRight":t?(document.querySelectorAll(".keyboard__key").forEach((function(e){e.textContent.length<2&&(e.textContent=e.textContent.toLowerCase())})),t=!1):(document.querySelectorAll(".keyboard__key").forEach((function(e){e.textContent.length<2&&(e.textContent=e.textContent.toUpperCase())})),t=!0);break;case"Enter":d.value+="\n";break;case"Space":d.value+=" "}}function y(e){switch(e){case"ShiftLeft":case"ShiftRight":t?(document.querySelectorAll(".keyboard__key").forEach((function(e){e.textContent.length<2&&(e.textContent=e.textContent.toLowerCase())})),t=!1):(document.querySelectorAll(".keyboard__key").forEach((function(e){e.textContent.length<2&&(e.textContent=e.textContent.toUpperCase())})),t=!0)}}function f(e){var t=d.selectionStart;"Backspace"===e&&0!==t&&(d.value=d.value.slice(0,d.selectionStart-1)+d.value.slice(t,d.value.length),d.setSelectionRange(t-1,t-1)),"Delete"===e&&(d.value=d.value.slice(0,t)+d.value.slice(t+1,d.value.length),d.setSelectionRange(t,t))}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=new Set;document.addEventListener("keydown",(function(t){a.add(t.code);for(var o=0,r=n;o<r.length;o++){var c=r[o];if(!a.has(c))return}a.clear(),e()})),document.addEventListener("keyup",(function(e){a.delete(e.code)}))}function g(e){"CapsLock"===e&&(t?(document.querySelectorAll(".keyboard__key").forEach((function(e){e.textContent.length<2&&(e.textContent=e.textContent.toLowerCase())})),t=!1):(document.querySelectorAll(".keyboard__key").forEach((function(e){e.textContent.length<2&&(e.textContent=e.textContent.toUpperCase())})),t=!0))}if(new o(i.node,"p","description").node.textContent="Клавиатура создана для операционной системе Windows",new o(i.node,"p","language").node.textContent="Для переключения языка комбинация: левыe ctrl + alt",a.forEach((function(e){var t=new o(s.node,"div","keyboard__line");e.forEach((function(e){var n=new o(t.node,"button","keyboard__key");switch(n.node.textContent="".concat(e),e){case"Backspace":n.node.classList.add("keyboard__key_very-long"),n.node.classList.add("backspace");break;case"Tab":n.node.classList.add("keyboard__key_long"),n.node.classList.add("tab");break;case"Shift":n.node.classList.add("keyboard__key_long"),n.node.classList.add("shift");break;case"Enter":n.node.classList.add("keyboard__key_long"),n.node.classList.add("enter");break;case"Caps lock":n.node.classList.add("keyboard__key_long"),n.node.classList.add("caps-lock");break;case"Space":n.node.classList.add("keyboard__key_extra-long"),n.node.classList.add("space")}}))})),d.addEventListener("blur",(function(){d.focus()})),document.querySelector("textarea").addEventListener("keydown",(function(e){return e.preventDefault()})),document.querySelectorAll(".keyboard__key").forEach((function(e){e.addEventListener("mouseup",(function(){d.focus(),y(e.dataset.keycode)}))})),function(e){for(var t=document.querySelectorAll(".keyboard__key"),n=0;n<t.length;n++)t[n].dataset.keycode="".concat(e[n])}(c),k((function(){return function(){if("en"===e){for(var t=document.querySelectorAll(".keyboard__key"),n=0;n<t.length;n++)t[n].textContent="".concat(r[n]);e="ru",localStorage.setItem("lang","".concat(e))}else{for(var o=a.flat(),c=document.querySelectorAll(".keyboard__key"),l=0;l<c.length;l++)c[l].textContent="".concat(o[l]);e="en",localStorage.setItem("lang","".concat(e))}}()}),"ControlLeft","AltLeft"),k((function(){document.querySelector('[data-keycode="ControlLeft"]').classList.remove("keyboard__key_active")}),"ControlLeft","AltRight"),document.querySelectorAll(".keyboard__key").forEach((function(e){e.addEventListener("mousedown",(function(){d.focus(),u(e.dataset.keycode),g(e.dataset.keycode),f(e.dataset.keycode),e.textContent.length<2&&(d.value+=e.textContent)}))})),window.addEventListener("keydown",(function(e){d.focus(),u(e.code),g(e.code),f(e.code);for(var t=document.querySelectorAll(".keyboard__key"),n=0;n<t.length;n++)t[n].dataset.keycode==="".concat(e.code)&&(t[n].classList.add("keyboard__key_active"),t[n].textContent.length<2&&(d.value+=t[n].textContent))})),window.addEventListener("keyup",(function(e){y(e.code),d.focus();for(var t=document.querySelectorAll(".keyboard__key"),n=0;n<t.length;n++)t[n].dataset.keycode==="".concat(e.code)&&t[n].classList.remove("keyboard__key_active")})),localStorage.getItem("lang"))if("en"===localStorage.getItem("lang"))e="en";else{e="ru";for(var v=document.querySelectorAll(".keyboard__key"),h=0;h<v.length;h++)v[h].textContent="".concat(r[h]);localStorage.setItem("lang","".concat(e))}else e="en",localStorage.setItem("lang","".concat(e))}))})();